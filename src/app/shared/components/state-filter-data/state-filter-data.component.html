<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <p>
        {{ data.about }}
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-12 d-flex justify-content-between">
      <div *ngIf="!stateServiceLabel" class="col-sm-12 col-md-5 pl-1">
        <button
          *ngFor="let item of data.btnLabels; let i = index"
          (click)="changeActiveBtn(i)"
          [id]="'btn-' + i"
          style="margin-left: 2pc"
          class="btn deSelected my-2"
          [ngClass]="i == lastSelectedId ? 'selected' : 'deSelected'"
        >
          {{ item }}
        </button>
      </div>
<!-- list of dropdown for slb in state dashboard -->
      <div *ngIf="stateServiceLabel" class="col-sm-12 col-md-5 pl-1">
        <select class="form-select text-capitalize" (change)="getServiceLevelBenchmark($event)">
          <option *ngFor="let item of serviceTabList" [value]="item">
            {{ item }}
          </option>
        </select>
      </div>

      <!-- <div *ngIf="!stateServiceLabel" class="col-sm-12 col-md-4">
        <div class="d-flex">
          <select class="form-select text-capitalize" (change)="getCheckBoxValue($event)">
            <option *ngFor="let item of checkBoxArray" [value]="item?.value">
              {{ item?.title }}
            </option>
          </select>

          <label class="checkboxLabel" *ngFor="let item of checkBoxArray">
            <input
              type="radio"
              value="{{ item.value }}"
              (click)="getCheckBoxValue($event)"
              [disabled]="item?.isDisabled"
            />{{ item.title }}</label
          >
          <button type="button" (click)="reset()" class="searchButton">
            Reset
          </button>
        </div>
      </div> -->

      <div class="col-sm-12 col-md-5 pd-s mb-3">
        <div class="d-flex justify-content-between">
          <div></div>
          <div class="d-flex" >
            <div *ngIf="!stateServiceLabel" class="mr-1" [matTooltip]="'Select an option to view average data'">
              <select class="form-select text-capitalize" (change)="getCheckBoxValue($event)">
                <option value="none" selected hidden [disabled]="item?.isDisabled">Select an Option</option>
                <option *ngFor="let item of checkBoxArray" [value]="item?.value">
                  {{ item?.title }}
                </option>
              </select>
            </div>
            <!-- year drop down -->
            <div class="mr-1">
              <select
                class="form-select"
                aria-label="Default select"
                (change)="getSelectedFinancialYear($event)"
              >
                <option *ngFor="let year of yearList" [value]="year" [selected]="year == financialYear">
                  {{ year}}
                </option>
                <!-- <option [value]="item?.code" *ngFor="let item of stateList">{{item?.name}}</option> -->
              </select>
            </div>
            <!-- Search for ULB Names -->
            <form class="filter-form mr-1">
              <div>
                <!-- <div class="pe-0 justify-content-end"> -->
                <input
                  type="text"
                  placeholder="Search for ULB names"
                  [formControl]="nationalFilter"
                  [matAutocomplete]="auto"
                  class="fl-input form-control w-100"
                  style="height: 2.4rem;"
                />
                <!-- </div> -->
                <!-- <div class="col-3 col-sm-3 ps-0">
                <button type="button" class="btn btnFilter">Search</button>
              </div> -->
                <div class="col-6 col-sm-12">
                  <mat-autocomplete
                    autoActiveFirstOption
                    #auto="matAutocomplete"
                  >
                    <!-- (click)="filterData(option)" -->
                    <a
                      *ngFor="let option of filteredOptions; let i = index"
                      style="text-decoration: none"
                    >
                      <mat-option (click)="getUlbData(option)" [value]="option?.name">
                        <span  style="font-size: 10px;"> {{ option?.name }}</span>
                      </mat-option>
                    </a>
                  </mat-autocomplete>
                </div>
              </div>

              <!-- <div style="display: inline-block; float: right;">

            </div> -->
            </form>
            <button type="button" (click)="reset()" class="btn btn-sm searchButton" *ngIf="!stateServiceLabel" style="padding: 0.25rem 0.5rem">
            <!-- <button type="button" (click)="reset()" class="btn btn-sm searchButton" style="padding: 0.25rem 0.5rem"> -->
              Reset
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <div *ngIf="!stateServiceLabel"> -->
<div *ngIf="!ActiveButton?.includes('Mix') || stateServiceLabel">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12" *ngIf="!stateServiceLabel">
        <app-revenuechart
          [chartDialogues]="true"
          [compareDialogType]="compareDialogType"
          [headerActions]="headerActions"
          [chartId]="'StateScatterChartId'"
          [chartData]="scatterData"
          [chartTitle]="''"
          (compareChange)="filterChangeInChart($event)"
          [nestedChartFilterOption]="nestedChartFilterOption"
          (actionClicked)="getClickedAction($event)"
          [getChartPayload]="scatterChartPayload"
        ></app-revenuechart>
      </div>
      <div class="col-md-12" *ngIf="stateServiceLabel">
        <app-revenuechart
          [compareDialogType]="compareDialogType"
          [headerActions]="headerActions"
          [chartId]="'StateScatterChartId'"
          [chartData]="scatterData"
          [chartTitle]="''"
          (compareChange)="filterChangeInChart($event)"
          [scatterOption]="serviceLevelBenchmarkScatterOption"
          (actionClicked)="getClickedAction($event)"
          [getChartPayload]="scatterChartPayload"
        ></app-revenuechart>
      </div>
    </div>
    <div class="row tablerow">
      <div class="col-12">
        <p class="py-4">
          Distribution of ULBs in {{stateName}} according to Population category
        </p>

        <table class="table table-bordered">
          <tbody>
            <tr class="rowClass">
              <td>ULB Population Category</td>
              <td class="text-center" *ngFor="let heading of stateUlbsPopulation?.tableHeading">{{heading}}</td>
            </tr>
            <tr>
              <td>Number Of Cities</td>
              <td *ngFor="let heading of stateUlbsPopulation?.tableHeading">
                {{ _commonServices.formatNumber( stateUlbsPopulation?.tableDataSource[heading] )}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- </div> -->

<div *ngIf="!stateServiceLabel">
  <div *ngIf="ActiveButton?.includes('Mix') && !compType">
    <app-revenue-mix
      [chartId]="'doughnutDataChartId'"
      [chartData]="doughnutData"
      [chartOptions]="doughnutChartOptions"
      (compType)="getCompType($event)"
      [multiChart]="multiChart"
      (dounghnuChartLabels)="labels($event)"
      [chartTitle]="''"
      [returnCompType]="compType"
      (actionClicked)="getClickedAction($event)"
      [getChartPayload]="scatterChartPayload"
    ></app-revenue-mix>
  </div>
</div>

<div *ngIf="!stateServiceLabel">
  <div *ngIf="ActiveButton?.includes('Mix') && compType">
    <app-revenue-mix
      [chartId]="'doughnutDataChartId'"
      [chartData]="doughnutDataArr"
      [chartOptions]="doughnutChartOptions"
      (compType)="getCompType($event)"
      [multiChart]="multiChart"
      (dounghnuChartLabels)="labels($event)"
      [chartTitle]="''"
      [returnCompType]="compType"
      (actionClicked)="getClickedAction($event)"
      [getChartPayload]="scatterChartPayload"
    ></app-revenue-mix>
  </div>
</div>
<!-- <div *ngIf="ActiveButton === 'Own Revenue Mix'">
  <app-revenue-mix   [chartId]="generateRandomId('doughnutDataChartId')"
  [chartData]="doughnutData"
  [chartOptions]="doughnutChartOptions"
  [chartTitle]="'Total revenue of MCGM for last 3 years compared with state average'"></app-revenue-mix>
</div> -->

<div class="container">
  <div class="row">
    <div class="col-12 mt-5 mb-5 d-flex">
      City Ranking

      <div *ngIf="!stateServiceLabel">
        <div class="mx-2" *ngIf="ActiveButton.includes('Mix')">
          <select class="mixSelect" (change)="getChartDropdownValue($event)">
            <!-- <option *ngFor="let item of chartLabels" [value]="item">
              {{ item }}
            </option> -->
            <!-- <option *ngFor="let item of chartDropdownList" [value]="item?.value">
              {{item?.name}}
            </option> -->
            <option *ngFor="let item of chartDropdownList" [value]="item?.code">
              {{item?._id}}
            </option>
          </select>
        </div>
      </div>
      <button
        class="rankingButton"
        [ngClass]="{ activeButton: BarGraphValue }"
        (click)="showBarGraph()"
      >
        Top 10
      </button>
      <button
        class="rankingButton"
        [ngClass]="{ activeButton: !BarGraphValue }"
        (click)="showBottomGraph()"
      >
        Bottom 10
      </button>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <app-revenuechart
        [headerActions]="headerActions"
        [chartTitle]="chartTitle"
        [chartId]="'topBarChartId234'"
        [chartData]="barData"
        [ChartOptions]="barChartOptions"
        [notFound]="barChartNotFound"
        (actionClicked)="getClickedAction($event)"
        [getChartPayload]="barChartPayload"
      ></app-revenuechart>
      <!-- <app-revenuechart
        *ngIf="BarGraphValue === false"
        [headerActions]="headerActions"
        [chartTitle]="
          'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.'
        "
        [chartId]="bottomBarChartId456"
        [chartData]="bottomBarData"
      ></app-revenuechart> -->
    </div>
  </div>
</div>

<div class="container">
  <div class="row my-5">
    <div class="m-auto" style="width: 60%">
      You can also download the source data in excel format
      <button class="cursor-pointer bottomDownloadButton">
        <img
          src="../../../../assets/CIty_detail_dashboard – 3/2867888_download_icon.svg"
          height="13px"
          width="13px"
          class="m-1"
        />Download Data
      </button>
    </div>
  </div>
</div>
