<!-- <circle-progress [percent]="100" [radius]="100" [outerStrokeWidth]="16" [outerStrokeColor]="'#f2f2f2'"
    [animation]="true" [animationDuration]="300" [showTitle]='true' [title]="'No Data Found'" [showSubtitle]='false'
    [showUnits]='false'>
</circle-progress> -->
<div style="overflow-y: hidden;overflow-x: hidden;">
    <!-- <div class="container-fluid row"
        style="margin-bottom: 15px;display:flex; line-height: 38px; justify-content: center;">
        <span style="font-size: 26px; font-weight: 600; margin-right:15px">Dashboard for 15th FC 2021-22 </span>
        <select (change)="onClickingStateTab($event)" class="dropdown" style="width: 150px !important; height:35px;
        text-align-last: center; font-size: 16px; border: 2px solid #333;">
            <option selected>India</option>
            <option [selected]="isSelected(resData)" *ngFor="let resData of stateslist ; let tabelIndex=index"
                value="{{resData.code}} and {{resData._id}}">
                {{resData.name}}
            </option>
        </select>
    </div> -->

    <div class="container-fluid">
        <div class="row">
            <div class="flex justify-content-center fs-4 fw-bold" style="margin-left: 25%;">Dashboard for 15th FC
                2021-22
                <select (change)="onClickingStateTab($event)" class="dropdown" style="width: 150px !important; height:35px;
        text-align-last: center; font-size: 16px; border: 2px solid #333;">
                    <option selected>India</option>
                    <option [selected]="isSelected(resData)" *ngFor="let resData of stateslist ; let tabelIndex=index"
                        value="{{resData.code}} and {{resData._id}}">
                        {{resData.name}}
                    </option>
                </select>
            </div>
        </div>
    </div>
    <div class="container-fluid row">

        <!-- <div class="col-sm-5" style="min-height: 50vh; margin-bottom: 1.5%; position: relative;">
            <div class="row">
                <div id="finance-law-map" style="position: initial;">
                </div>
            </div>


        </div> -->

        <div class="row" style="margin-bottom: 10px; ">

            <div class="cards" style="margin-top: 10px;">
                <div class="col-sm-3 card ">
                    <div class="row">
                        <div class="col-sm-12" style="text-align: center;">
                            <div class="card-number" style="font-weight:500">{{submitted_totalUlbs}}/{{totalUlbs}}
                            </div>
                            <div class="card-text" style="font-size:16px ; margin-top:10px">ULB Forms Approved
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-sm-3 card">
                    <div class="row">
                        <div class="col-sm-12" style="text-align: center;">
                            <!-- <div class="card-number">{{submitted_nonMillion}}</div>
                                <div class="card-text" style="font-size:13px">Non Million Cities Approved</div>
                                <div class="card-text" style="font-size:13px">Out Of {{nonMillion}} </div> -->
                            <div class="card-number" style="font-weight:500">{{submitted_nonMillion}}/{{nonMillion}}
                            </div>
                            <div class="card-text" style="font-size:14px"> Non Million Plus ULB Forms Approved</div>


                        </div>

                    </div>
                </div>
                <div class="col-sm-3 card">
                    <div class="row">
                        <div class="col-sm-12" style="text-align: center;padding-right: 6px; padding-left: 6px; ">
                            <div class="card-number">
                                {{submitted_ulbsInMillionPlusUlbs}}/{{ulbsInMillionPlusUlbs}}</div>
                            <div class="card-text" style="font-size:14px">ULB Forms in Million Plus UAs Approved
                                <!-- ULBs in Million-Plus UAs Approved -->
                            </div>

                            <!-- <div class="card-number" *ngIf="!ulbsInMillionPlusUlbs">NA</div> -->
                        </div>


                    </div>
                </div>
                <div class="col-sm-3 card">
                    <div class="row">
                        <div class="col-sm-12" style="text-align: center;">
                            <div class="card-number">{{submitted_millionPlusUA ? submitted_millionPlusUA : 0
                                }}/{{millionPlusUA ? millionPlusUA : '0' }}
                            </div>
                            <div class="card-text" style="font-size:14px">UA Forms Submitted by States
                                <!-- Million-Plus UAs Approved -->
                            </div>

                            <!-- <div class="card-number" *ngIf="!millionPlusUA">NA</div> -->

                        </div>

                    </div>
                </div>
            </div>

        </div>
        <!-- <div class="row">
                <div class="col-sm-12 col-lg-12 col-md-12">
                    <div class="row">

                        <div class="col-sm-9 col-lg-9 col-md-9" style="padding: 0;">
                            <span style="font-weight: 600; font-size: 16px;"> Overview of ULB Data Submission</span>
                        </div>

                        <div class="col-sm-2 col-lg-2 col-md-2 text-right" style="padding:0; margin-left: 5%;">
                            <mat-icon class="mat-i" aria-hidden="false" matTooltip="Click here to download data.">
                                <img src="../../../../assets/mohua/cloud_download_white_24dp.svg" class="svg-gt">

                            </mat-icon>
                            <button type="button" class="btn btn-d" (click)="downloadTableData()" style="margin-bottom: 4px; font-size: 12px;
                             padding: 2px; height: 25px;">DOWNLOAD</button>
                        </div>

                    </div>
                    <div class="row" style="margin-right: 0;">
                        <div class="table-responsive"
                            style="overflow-y: auto; border: 1px solid  #00000029; margin-bottom: 1rem;height:300px">
                            <table #stateTable class="table tracking-history-table my_table" style="margin-bottom: 0;">
                                <thead style="position:sticky; top:0">
                                    <tr style="background-color: #047474; color: #FFFFFF;">
                                        <th scope="col" style="width: 1%; position:sticky; top:0" class="tableHeadText">
                                            S.No
                                        </th>

                                        <th scope="col" class="tableHeadText" style="position:sticky; top:0">State </th>
                                        <th scope="col" class="tableHeadText" style="width: 11%;position:sticky; top:0">
                                            Total ULBs
                                        </th>
                                        <th scope="col" class="tableHeadText" style="position:sticky; top:0">ULBs
                                            Submitted & Approved
                                        </th>
                                        <th scope="col" class="tableHeadText" style="position:sticky; top:0">ULBs Under
                                            Review by State
                                        </th>
                                        <th scope="col" class="tableHeadText" style="position:sticky; top:0">ULBs Not
                                            Submitted Data
                                        </th>
                                        <th scope="col" class="tableHeadText" style="position:sticky; top:0">
                                            Completed & Approved Forms (%)</th>

                                    </tr>
                                </thead>


                                <tbody>
                                    <tr *ngFor="let resData of tabelData ; let tabelIndex=index"
                                        tabindex="{{tabelIndex}}" class="tableHeadText">
                                        <td style="width: 1%;" [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{ tabelIndex+1}}
                                        </td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{resData.name}}
                                        </td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{resData.totalULBs}}
                                        </td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{resData.approvedByState}}
                                        </td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{resData.withState}}</td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''">
                                            {{resData.notSubmittedForm}}
                                        </td>
                                        <td [style.border-top]="tabelIndex == '0' ? 'none' : ''"
                                            style="font-weight: bold;">
                                            {{resData.approvedByState/resData.totalULBs * 100 ?
                                            (resData.approvedByState/resData.totalULBs * 100).toFixed(2) : 0 }}
                                            <small>%</small>
                                        </td>
                                        <td style="display: none;">
                                            {{resData.code}}
                                        </td>
                                        <td style="display: none;">
                                            {{resData.id}}
                                        </td>
                                    </tr>
                                    <tr class="tableHeadText"
                                        style="background-color: skyblue; font-weight: bold; position:sticky; bottom:0">
                                        <td style="width: 1%;">

                                        </td>
                                        <td>
                                            TOTAL
                                        </td>
                                        <td>
                                            {{total_totalULBs}}
                                        </td>
                                        <td>
                                            {{total_submittedForm}}
                                        </td>
                                        <td>
                                            {{total_withState}}</td>
                                        <td>
                                            {{total_notSubmittedForm}}
                                        </td>
                                        <td style="font-weight: bold;">
                                            {{total_submittedForm/total_totalULBs * 100 ?
                                            (total_submittedForm/total_totalULBs * 100).toFixed(2) : 0 }}
                                            <small>%</small>
                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>

                    </div>


                </div>

            </div> -->


    </div>

    <div class="container">
        <div class="row flex justify-content-center">
            <div class="tableTab" (click)="openDialogMpcTable()">MPC</div>
            <div class="tableTab" (click)="openDialogNmpcTable()">NMPC-UnTied</div>
            <div class="tableTab" (click)="openDialogNmpcTiedTable()">NMPC-Tied</div>
        </div>
    </div>

    <ng-template #mpcTable>
        <app-mpc-table (closeDialog)="closeModal()"></app-mpc-table>
    </ng-template>

    <ng-template #nmpcUntiedTable>
        <app-npmc-untied (closeDialog)="closeNmpcDialog()"></app-npmc-untied>
    </ng-template>

    <ng-template #nmpctiedTable>
        <app-npmc-tied (closeDialog)="closeNmpcTiedDialog()"></app-npmc-tied>
    </ng-template>



    <div class="row flex" style="width: 80vw; margin: 0 auto;">

        <div class="col-lg-8 col-sm-12" style="background-color: #12505A;">
            <div class="heading" style="box-shadow: -3px 2px 10px 1px rgba(255,255,255,0.74)">
                ULB Annual Account Status
            </div>

            <div class="row" style="display: flex; justify-content: space-evenly;">
                <div class="col-lg-5 col-sm-12 border-1 border-white m-2 "
                    style="background-color: #1b7280; border-radius: 5px; box-shadow: -3px 2px 10px 1px rgba(255,255,255,0.74)">
                    <div class="subHeading">
                        Audited Account 2019-2020
                    </div>
                    <div class="pieChartDiv">
                        <canvas id="firstPieChart" height="250" width="300"></canvas>
                    </div>
                    <div class="viewButton">
                        <button (click)="openDialogOverAllList()">View List</button>
                    </div>
                </div>
                <div class="col-lg-5 col-sm-12 border-1 border-white m-2"
                    style="background-color: #1b7280; border-radius: 5px; box-shadow: -3px 2px 10px 1px rgba(255,255,255,0.74)">
                    <div class="subHeading">
                        Provisional Account 2019-2020
                    </div>
                    <div class="pieChartDiv">
                        <canvas id="secondPieChart" height="250" width="300"></canvas>
                    </div>
                    <div class="viewButton">
                        <button (click)="openDialogOverAllList()">view List</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4  col-sm-12 " style="background-color: #12505A; border-left: 2px solid white; ">
            <div class="heading" style="border-radius: 5px; box-shadow: -3px 2px 10px 1px rgba(255,255,255,0.74)">
                ULB Utilization Report
            </div>
            <div class="pieChartDiv  " style="margin-top: 10%">
                <canvas id="doughnutPieChart" height="280" width="350"></canvas>
            </div>
            <div class="viewButton">
                <button (click)="openDialogOverAllList()">view List</button>
            </div>
        </div>
    </div>


</div>
<div class="row">
    <div class="col-sm-12 mb-2" style="margin-top:2%;">
        <mat-card>

            <div class="pull-right">
                <mat-label style="font-weight:bolder;">Year </mat-label>
                <select (change)="grantTransferFilter($event.target.value)" required>
                    <option [selected]="dateSelect" value="2020-21,date">2020-21</option>
                    <option value="2021-22,date">2021-22</option>
                </select>&nbsp;&nbsp;&nbsp;&nbsp;
                <mat-label class="m-1" style="font-weight:bolder;">Installment</mat-label>
                <select (change)="grantTransferFilter($event.target.value)" required>
                    <option [selected]="installmentSelect" value="2,installment">2</option>
                    <option [ngStyle]="{'display': year21 ? 'none':''}" value="1,installment">1</option>
                </select>
            </div>
            <mat-card-header>
                <mat-card-title>Grant Transfer Status</mat-card-title>
                <mat-card-subtitle>Last Updated on {{grantTransferDate | date:'dd/MM/YYYY':'IST'}}</mat-card-subtitle>
            </mat-card-header>
            <div style="text-align: end;">
                <button type="button" (click)="grantTransferDownload()" class="btn btn-d" style="font-size: 12px;
                padding: 2px; height: 25px;">DOWNLOAD</button>
            </div>
            <mat-card-content>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="table-responsive" style="overflow-y: auto; border: 1px solid
                         #00000029; margin-bottom: 1rem;">
                            <table class="table tracking-history-table my_table" style="margin-bottom: 0;">
                                <thead>
                                    <tr style="background-color: #047474; color: #FFFFFF;">
                                        <th scope="col" style="width: 17%;" class="tableHeadText">
                                            Grant Type
                                        </th>
                                        <th scope="col" class="tableHeadText" style="width: 15%;">Grant Amount Assigned
                                            in Cr</th>
                                        <th scope="col" class="tableHeadText" style="width: 17%;">
                                            ULBs submitted forms/ Total ULBs in Category
                                        </th>

                                        <th scope="col" style="width: 17%;" class="tableHeadText">{{!state_id ?
                                            'Number of States to Submit Grant Transfer Certificate' : 'Grant Transfer
                                            Certificate Status' }}
                                        </th>
                                        <th scope="col" style="width: 17%;" class="tableHeadText"> {{!state_id ?
                                            'Number of States with Grant Recommendations sent to the MoF' : 'Grant
                                            Recommendation Status' }}
                                        </th>
                                        <th scope="col" style="width: 17%;" class="tableHeadText"> {{!state_id ?
                                            'Number of States that Received Grants' : 'Grant Release Status' }}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of grantTransferCardData | keyvalue" class="tableHeadText">
                                        <td>
                                            {{item.key}}
                                        </td>
                                        <td>
                                            {{item.value?.amount}}
                                        </td>
                                        <td>
                                            {{item.value?.ulb}}
                                        </td>
                                        <td>
                                            {{item.value?.submissionDate}}
                                        </td>
                                        <td>
                                            {{item.value?.recommendationDate}}
                                        </td>
                                        <td>
                                            {{item.value?.releaseDate}}
                                        </td>
                                    </tr>
                                </tbody>

                            </table>

                        </div>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>
<div class="row bottomPart" style="margin-left: 0;
margin-right: 0;">
    <div class="col-sm-6" style="border-right:1px solid #0000001A ; ">
        <div class="row">
            <div class="col-sm-8 textInThirdColumn" style="border-bottom: 1px solid #0000001A;"> Million Plus City
                Challenge Fund</div>
            <div class=" col-sm-4"
                style="border-bottom: 1px solid #0000001A; border-right:1px solid #0000001A; height:42px; padding:0">

                <form>
                    <mat-form-field style="width:80%; height:30px ">
                        <input type="text" placeholder="Select UA" matInput [formControl]="myControl"
                            [matAutocomplete]="auto">
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                                {{option}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </form>

                <!-- <select [(ngModel)]="selectUa" (change)="selectedUA()" class="dropdown">
                    <option value="all">-ALL UAs-</option>
                    <option *ngFor="let item of UAs" value="{{item?._id}}">{{item?.name}}</option>
                </select> -->
            </div>
        </div>

        <div class="row">
            <div style="text-align: left;margin-left: 2%; margin-top: 2%;
                font-weight: bold; font-size: 16px;">SLB for Water Supply and Sanitation</div>

            <div *ngIf="noDataFound_millionSLB" style="text-align: center;
                font-size: 30px;
                margin-top: 12%;">No Data Found</div>
            <div style="width:90%; height:183px; align-items:center; margin-top: 1%;" *ngIf="!noDataFound_millionSLB">
                <canvas id="mpcf"></canvas>

            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="row">
            <div class="col-sm-12 textInThirdColumn" style="border-bottom: 1px solid #0000001A;"> Performance Conditions
                for Non-Million ULBs</div>

        </div>
        <div class="row">
            <div style="text-align: left;margin-left: 2%;margin-top: 2%;
                font-weight: bold; font-size: 16px;">SLB for Water Supply and Sanitation</div>
            <div *ngIf="noDataFound_nonMillionSLB" style="text-align: center;
                font-size: 30px;
                margin-top: 12%;">No Data Found</div>
            <div style="width:90%; height:183px; align-items:center; margin-top: 1%; "
                *ngIf="!noDataFound_nonMillionSLB">
                <canvas id="nmpcf"></canvas>

            </div>
        </div>
    </div>
</div>
<div class="row" style="text-align: center;">

    <div class="col-sm-6">
        <div class="Card2">
            <div class="row" style="margin-top: 2%;
            font-weight: bold;justify-content: center;">
                Submission of Action Plan and Projects for Water and Sanitation
            </div>
            <div class="row" style="height: 70%;">
                <div class="col-sm-7" style="text-align: left;padding-left: 15%;">
                    <span style="color: #12505A; font-size: 41px;">{{rejuvenationPlans ? 'Yes': 'No'}}
                    </span>


                </div>

                <div class="col-sm-5" style="margin-top:15px; display:flex;justify-content: space-evenly;">

                    <img [ngStyle]="{'opacity': rejuvenationPlans ? 1 : 0.5}"
                        src="../../../../assets/stateform/nature.svg">
                    <img [ngStyle]="{'opacity': rejuvenationPlans ? 1 : 0.5}"
                        src="../../../../assets/stateform/nature.svg">
                    <img [ngStyle]="{'opacity': rejuvenationPlans ? 1 : 0.5}"
                        src="../../../../assets/stateform/nature.svg">
                    <img [ngStyle]="{'opacity': rejuvenationPlans ? 1 : 0.5}"
                        src="../../../../assets/stateform/nature.svg">


                </div>
            </div>

        </div>
    </div>

</div>